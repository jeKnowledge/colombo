<h1>Auditors</h1>

<div class="table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th>Username</th>
      <th>Name</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @auditors.each do |user| %>
      <tr>
        <td><%= user.username %></td>
        <td><%= user.name %></td>
        <% if user.validated %>
          <td><%= link_to "Invalidate", invalidate_user_admin_path(user.id), method: :post %></td>
        <% else %>
          <td><%= link_to "Validate", validate_user_admin_path(user.id), method: :post %></td>
        <% end %>
        <td><%= link_to "Details", show_user_admin_path(user.id) %></td>
        <td><%= link_to "Delete", delete_user_admin_path(user.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @auditors, param_name: :auditor_page %>
</div>

<h1>Clients</h1>

<div class="table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th>Username</th>
      <th>Name</th>
    </tr>
  </thead>

  <tbody>
    <% @clients.each do |client| %>
      <tr>
        <td><%= client.username %></td>
        <td><%= client.name %></td>
        <% if client.validated %>
          <td><%= link_to "Invalidate", invalidate_user_admin_path(client.id), method: :post %></td>
        <% else %>
          <td><%= link_to "Validate", validate_user_admin_path(client.id), method: :post %></td>
        <% end %>
        <td><%= link_to "Details", show_user_admin_path(client.id) %></td>
        <td><%= link_to "Delete", delete_user_admin_path(client.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>
<%= paginate @clients, param_name: :client_page %>
</div>

<h1>Reports</h1>

<%= form_tag set_default_report_rating_path do |f| %>
  <%= f.number_field :rating, in: 0..5, step: 0.1 %>
  <%= f.submit "Set" %>
<%= end %>

<div class="table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th>Products</th>
      <th>Date</th>
      <th>Auditor</th>
      <th>Upload date</th>
    </tr>
  </thead>

  <tbody>
    <% @reports.each do |report| %>
      <tr>
        <td><%= report.products %></td>
        <td><%= report.date %></td>
        <td><%= link_to report.auditor.username, show_user_admin_path(report.auditor_id) %></td>
        <td><%= report.upload_date %></td>
        <% unless report.validated %>
          <td><%= link_to "Validate", validate_audit_admin_path(report.id) %></td>
        <% end %>
        <td><%= link_to "Details", show_audit_admin_path(report.id) %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @reports, param_name: :report_page %>
</div>

<h1>Plans</h1>

<div class="table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th>Products</th>
      <th>Date</th>
      <th>Auditor</th>
    </tr>
  </thead>

  <tbody>
    <% @plans.each do |plan| %>
      <tr>
        <td><%= plan.products %></td>
        <td><%= plan.date %></td>
        <td><%= link_to plan.auditor.username, show_user_admin_path(plan.auditor_id) %></td>
        <% unless plan.validated %>
          <td><%= link_to "Validate", validate_audit_admin_path(plan.id) %></td>
        <% end %>
        <td><%= link_to "Details", show_audit_admin_path(plan.id) %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @plans, param_name: :plan_page %>
</div>

<h1>Listing Requests</h1>

<div class="table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th>Products</th>
      <th>Date</th>
      <th>Client</th>
    </tr>
  </thead>

  <tbody>
    <% @requests.each do |request| %>
      <tr>
        <td><%= request.products %></td>
        <td><%= request.date %></td>
        <td><%= link_to request.client.username, show_user_admin_path(request.client_id) %></td>
        <td><%= link_to "Details", show_audit_admin_path(request.id) %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @requests, param_name: :request_page %>
</div>

<h1>Listing Messages</h1>

<div class="table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th>Source</th>
      <th>Destiny</th>
    </tr>
  </thead>

  <tbody>
    <% @messages.each do |message| %>
      <tr>
        <td><%= message.source.username %></td>
        <td><%= message.destiny.username %></td>
        <td><%= link_to "Read", show_message_admin_path(message.id) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @messages, param_name: :message_page %>
</div>
